(function(b,c){function m(){b.removeEventListener("load",m,!1);g=!0}function a(e){return n=n||new a.Class(e)}function h(a,b){for(var c in b)a[c]=b[c];return a}function p(){"#ath"==c.location.hash&&history.replaceState("",b.document.title,c.location.href.split("#")[0]);k.test(c.location.href)&&history.replaceState("",b.document.title,c.location.href.replace(k,"$1"));l.test(c.location.search)&&history.replaceState("",b.document.title,c.location.href.replace(l,"$2"))}var q="addEventListener"in b,g=!1;
"complete"===c.readyState?g=!0:q&&b.addEventListener("load",m,!1);var k=/\/ath(\/)?$/,l=/([\?&]ath=[^&]*$|&ath=[^&]*(&))/,n;a.intl={de_de:{ios:"Um diese Web-App zum Home-Bildschirm hinzuzuf\u00fcgen, tippen Sie auf %icon und dann <strong>Zum Home-Bildschirm</strong>.",android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},
en_us:{ios:"To add What's Fresh to the home screen: tap %icon and then <strong>Add to Home Screen</strong>.",android:'To add What\'s Fresh to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},es_es:{ios:"Para a\u00f1adir esta aplicaci\u00f3n web a la pantalla de inicio: pulsa %icon y selecciona <strong>A\u00f1adir a pantalla de inicio</strong>.",
android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},fr_fr:{ios:"Pour ajouter cette application web sur l'\u00e9cran d'accueil : Appuyez %icon et s\u00e9lectionnez <strong>Ajouter sur l'\u00e9cran d'accueil</strong>.",android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},
he_il:{ios:'<span dir="rtl">\u05dc\u05d4\u05d5\u05e1\u05e4\u05ea \u05d4\u05d0\u05e4\u05dc\u05d9\u05e7\u05e6\u05d9\u05d4 \u05dc\u05de\u05e1\u05da \u05d4\u05d1\u05d9\u05ea: \u05dc\u05dc\u05d7\u05d5\u05e5 \u05e2\u05dc %icon \u05d5\u05d0\u05d6 <strong>\u05d4\u05d5\u05e1\u05e3 \u05dc\u05de\u05e1\u05da \u05d4\u05d1\u05d9\u05ea</strong>.</span>',android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},
it_it:{ios:"Per aggiungere questa web app alla schermata iniziale: premi %icon e poi <strong>Aggiungi a Home</strong>.",android:'Per aggiungere questa web app alla schermata iniziale, apri il menu opzioni del browser e premi su <strong>Aggiungi alla homescreen</strong>. <small>Puoi accedere al menu premendo il pulsante hardware delle opzioni se la tua device ne ha uno, oppure premendo l\'icona <span class="ath-action-icon">icon</span> in alto a destra.</small>'},nb_no:{ios:"For \u00e5 installere denne appen p\u00e5 hjem-skjermen: trykk p\u00e5 %icon og deretter <strong>Legg til p\u00e5 Hjem-skjerm</strong>.",
android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},pt_br:{ios:"Para adicionar este app \u00e0 tela de in\u00edcio: clique %icon e ent\u00e3o <strong>Tela de in\u00edcio</strong>.",android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},
pt_pt:{ios:"Para adicionar esta app ao ecr\u00e3 principal: clique %icon e depois <strong>Ecr\u00e3 principal</strong>.",android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},nl_nl:{ios:"Om deze webapp op je telefoon te installeren, klik op %icon en dan <strong>Zet in beginscherm</strong>.",
android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},sv_se:{ios:"F\u00f6r att l\u00e4gga till denna webbapplikation p\u00e5 hemsk\u00e4rmen: tryck p\u00e5 %icon och d\u00e4refter <strong>L\u00e4gg till p\u00e5 hemsk\u00e4rmen</strong>.",android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},
zh_cn:{ios:"\u5982\u8981\u628a\u5e94\u7528\u7a0b\u5f0f\u52a0\u81f3\u4e3b\u5c4f\u5e55,\u8bf7\u70b9\u51fb%icon, \u7136\u540e<strong>\u52a0\u81f3\u4e3b\u5c4f\u5e55</strong>",android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},zh_tw:{ios:"\u5982\u8981\u628a\u61c9\u7528\u7a0b\u5f0f\u52a0\u81f3\u4e3b\u5c4f\u5e55, \u8acb\u9ede\u64ca%icon, \u7136\u5f8c<strong>\u52a0\u81f3\u4e3b\u5c4f\u5e55</strong>.",
android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'}};for(var d in a.intl)a.intl[d.substr(0,2)]=a.intl[d];a.defaults={appID:"org.cubiq.addtohome",fontSize:15,debug:!1,modal:!1,mandatory:!1,autostart:!0,skipFirstVisit:!1,startDelay:1,lifespan:15,displayPace:1440,
maxDisplayCount:0,icon:!0,message:"",validLocation:[],onInit:null,onShow:null,onRemove:null,onAdd:null,onPrivate:null,privateModeOverride:!1,detectHomescreen:!1};d=b.navigator.userAgent;var r=b.navigator;h(a,{hasToken:"#ath"==c.location.hash||k.test(c.location.href)||l.test(c.location.search),isRetina:b.devicePixelRatio&&1<b.devicePixelRatio,isIDevice:/iphone|ipod|ipad/i.test(d),isMobileChrome:-1<d.indexOf("Android")&&/Chrome\/[.0-9]*/.test(d),isMobileIE:-1<d.indexOf("Windows Phone"),language:r.language&&
r.language.toLowerCase().replace("-","_")||""});a.language=a.language&&a.language in a.intl?a.language:"en_us";a.isMobileSafari=a.isIDevice&&-1<d.indexOf("Safari")&&0>d.indexOf("CriOS");a.OS=a.isIDevice?"ios":a.isMobileChrome?"android":a.isMobileIE?"windows":"unsupported";a.OSVersion=d.match(/(OS|Android) (\d+[_\.]\d+)/);a.OSVersion=a.OSVersion&&a.OSVersion[2]?+a.OSVersion[2].replace("_","."):0;a.isStandalone=b.navigator.standalone||a.isMobileChrome&&40>screen.height-c.documentElement.clientHeight;
a.isTablet=a.isMobileSafari&&-1<d.indexOf("iPad")||a.isMobileChrome&&0>d.indexOf("Mobile");a.isCompatible=a.isMobileSafari&&6<=a.OSVersion||a.isMobileChrome;var t={lastDisplayTime:0,returningVisitor:!1,displayCount:0,optedout:!1,added:!1};a.removeSession=function(b){try{localStorage.removeItem(b||a.defaults.appID)}catch(c){}};a.Class=function(e){this.options=h({},a.defaults);h(this.options,e);if(q&&(this.options.mandatory=this.options.mandatory&&("standalone"in b.navigator||this.options.debug),this.options.modal=
this.options.modal||this.options.mandatory,this.options.mandatory&&(this.options.startDelay=-.5),this.options.detectHomescreen=!0===this.options.detectHomescreen?"hash":this.options.detectHomescreen,this.options.debug&&(a.isCompatible=!0,a.OS="string"==typeof this.options.debug?this.options.debug:"unsupported"==a.OS?"android":a.OS,a.OSVersion="ios"==a.OS?"8":"4"),this.container=c.documentElement,this.session=(this.session=localStorage.getItem(this.options.appID))?JSON.parse(this.session):void 0,!a.hasToken||
a.isCompatible&&this.session||(a.hasToken=!1,p()),a.isCompatible)){this.session=this.session||t;try{localStorage.setItem(this.options.appID,JSON.stringify(this.session)),a.hasLocalStorage=!0}catch(d){a.hasLocalStorage=!1,this.options.onPrivate&&this.options.onPrivate.call(this)}e=!this.options.validLocation.length;for(var f=this.options.validLocation.length;f--;)if(this.options.validLocation[f].test(c.location.href)){e=!0;break}localStorage.getItem("addToHome")&&this.optOut();if(!this.session.optedout&&
!this.session.added&&e)if(a.isStandalone)this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&a.hasLocalStorage&&this.options.onAdd.call(this));else{if(this.options.detectHomescreen){if(a.hasToken){p();this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&a.hasLocalStorage&&this.options.onAdd.call(this));return}"hash"==this.options.detectHomescreen?history.replaceState("",b.document.title,c.location.href+"#ath"):"smartURL"==this.options.detectHomescreen?
history.replaceState("",b.document.title,c.location.href.replace(/(\/)?$/,"/ath$1")):history.replaceState("",b.document.title,c.location.href+(c.location.search?"&":"?")+"ath=")}if(!this.session.returningVisitor&&(this.session.returningVisitor=!0,this.updateSession(),this.options.skipFirstVisit))return;if(this.options.privateModeOverride||a.hasLocalStorage)this.ready=!0,this.options.onInit&&this.options.onInit.call(this),this.options.autostart&&this.show()}}};a.Class.prototype={events:{load:"_delayedShow",
error:"_delayedShow",orientationchange:"resize",resize:"resize",scroll:"resize",click:"remove",touchmove:"_preventDefault",transitionend:"_removeElements",webkitTransitionEnd:"_removeElements",MSTransitionEnd:"_removeElements"},handleEvent:function(a){var b=this.events[a.type];if(b)this[b](a)},show:function(e){if(this.options.autostart&&!g)setTimeout(this.show.bind(this),50);else if(!this.shown){var d=Date.now(),f=this.session.lastDisplayTime;!0!==e&&(!this.ready||d-f<6E4*this.options.displayPace||
this.options.maxDisplayCount&&this.session.displayCount>=this.options.maxDisplayCount)||(this.shown=!0,this.session.lastDisplayTime=d,this.session.displayCount++,this.updateSession(),this.applicationIcon||(this.applicationIcon="ios"==a.OS?c.querySelector('head link[rel^=apple-touch-icon][sizes="152x152"],head link[rel^=apple-touch-icon][sizes="144x144"],head link[rel^=apple-touch-icon][sizes="120x120"],head link[rel^=apple-touch-icon][sizes="114x114"],head link[rel^=apple-touch-icon]'):c.querySelector('head link[rel^="shortcut icon"][sizes="196x196"],head link[rel^=apple-touch-icon]')),
e="",e=this.options.message in a.intl?a.intl[this.options.message][a.OS]:""!==this.options.message?this.options.message:a.intl[a.language][a.OS],e="<p>"+e.replace("%icon",'<span class="ath-action-icon">icon</span>')+"</p>",this.viewport=c.createElement("div"),this.viewport.className="ath-viewport",this.options.modal&&(this.viewport.className+=" ath-modal"),this.options.mandatory&&(this.viewport.className+=" ath-mandatory"),this.viewport.style.position="absolute",this.element=c.createElement("div"),
this.element.className="ath-container ath-"+a.OS+" ath-"+a.OS+(a.OSVersion+"").substr(0,1)+" ath-"+(a.isTablet?"tablet":"phone"),this.element.style.cssText="-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0s;-webkit-transition-timing-function:ease-out;transition-property:transform,opacity;transition-duration:0s;transition-timing-function:ease-out;",this.element.style.webkitTransform="translate3d(0,-"+b.innerHeight+"px,0)",this.element.style.transform="translate3d(0,-"+
b.innerHeight+"px,0)",this.options.icon&&this.applicationIcon&&(this.element.className+=" ath-icon",this.img=c.createElement("img"),this.img.className="ath-application-icon",this.img.addEventListener("load",this,!1),this.img.addEventListener("error",this,!1),this.img.src=this.applicationIcon.href,this.element.appendChild(this.img)),this.element.innerHTML+=e,this.viewport.style.left="-99999em",this.viewport.appendChild(this.element),this.container.appendChild(this.viewport),this.img||this._delayedShow())}},
_delayedShow:function(a){setTimeout(this._show.bind(this),1E3*this.options.startDelay+500)},_show:function(){var a=this;this.updateViewport();b.addEventListener("resize",this,!1);b.addEventListener("scroll",this,!1);b.addEventListener("orientationchange",this,!1);this.options.modal&&c.addEventListener("touchmove",this,!0);this.options.mandatory||setTimeout(function(){a.element.addEventListener("click",a,!0)},1E3);setTimeout(function(){a.element.style.webkitTransitionDuration="1.2s";a.element.style.transitionDuration=
"1.2s";a.element.style.webkitTransform="translate3d(0,0,0)";a.element.style.transform="translate3d(0,0,0)"},0);this.options.lifespan&&(this.removeTimer=setTimeout(this.remove.bind(this),1E3*this.options.lifespan));this.options.onShow&&this.options.onShow.call(this)},remove:function(){clearTimeout(this.removeTimer);this.img&&(this.img.removeEventListener("load",this,!1),this.img.removeEventListener("error",this,!1));b.removeEventListener("resize",this,!1);b.removeEventListener("scroll",this,!1);b.removeEventListener("orientationchange",
this,!1);c.removeEventListener("touchmove",this,!0);this.element.removeEventListener("click",this,!0);this.element.addEventListener("transitionend",this,!1);this.element.addEventListener("webkitTransitionEnd",this,!1);this.element.addEventListener("MSTransitionEnd",this,!1);this.element.style.webkitTransitionDuration="0.3s";this.element.style.opacity="0"},_removeElements:function(){this.element.removeEventListener("transitionend",this,!1);this.element.removeEventListener("webkitTransitionEnd",this,
!1);this.element.removeEventListener("MSTransitionEnd",this,!1);this.container.removeChild(this.viewport);this.shown=!1;this.options.onRemove&&this.options.onRemove.call(this)},updateViewport:function(){if(this.shown){this.viewport.style.width=b.innerWidth+"px";this.viewport.style.height=b.innerHeight+"px";this.viewport.style.left=b.scrollX+"px";this.viewport.style.top=b.scrollY+"px";var e=c.documentElement.clientWidth;this.orientation=e>c.documentElement.clientHeight?"landscape":"portrait";var d=
"ios"==a.OS?"portrait"==this.orientation?screen.width:screen.height:screen.width;this.scale=screen.width>e?1:d/b.innerWidth;this.element.style.fontSize=this.options.fontSize/this.scale+"px"}},resize:function(){clearTimeout(this.resizeTimer);this.resizeTimer=setTimeout(this.updateViewport.bind(this),100)},updateSession:function(){!1!==a.hasLocalStorage&&localStorage.setItem(this.options.appID,JSON.stringify(this.session))},clearSession:function(){this.session=t;this.updateSession()},optOut:function(){this.session.optedout=
!0;this.updateSession()},optIn:function(){this.session.optedout=!1;this.updateSession()},clearDisplayCount:function(){this.session.displayCount=0;this.updateSession()},_preventDefault:function(a){a.preventDefault();a.stopPropagation()}};b.addToHomescreen=a})(window,document);
