(function(){var b=hh.namespace("hhf.modules.customers.public.payment");b.config={};b.init=function(a){$.extend(b.config,a);$(document).ready(b.documentInit)};b.documentInit=function(){b.updateTotal();$(".invoice").change(b.updateTotal);$("#amount").bind("change keyup",b.updateTotal);$("#payment").validate({errorContainer:$("#formError")});$("body").on("mouseover","span.tooltip",function(a){void 0==$(this).data("qtip")&&$(this).qtip({overwrite:!1,style:{classes:"ui-tooltip-shadow ui-tooltip-rounded",
widget:!0,width:"380px"},content:{text:"Loading...",ajax:{url:"/customers/payment?invoiceId="+$(this).data("invoiceid"),error:function(){this.set("content.text","Error loading invoice")},loading:!0,success:function(a){-1!=a.indexOf("<title>")?this.set("content.text","Error loading invoice"):this.set("content.text",a)}},title:{text:"Invoice #"+$(this).data("invoiceid")}},show:{solo:!0,event:a.type,ready:!0,delay:140},position:{my:"bottom left",at:"top center",effect:!1,viewport:$(window),adjust:{method:"flip"}}},
a)})};b.updateTotal=function(){var a=parseFloat($("#amount").val());isNaN(a)&&(a=0);$(".invoice:checked").each(function(){a+=parseFloat($(this).data("outstandingamount"))});$("#total").html(b.formatCurrency(a))};b.formatCurrency=function(a){a=a.toString().replace(/\$|\,/g,"");isNaN(a)&&(a="0");sign=a==(a=Math.abs(a));a=Math.floor(100*a+0.50000000001);cents=a%100;a=Math.floor(a/100).toString();10>cents&&(cents="0"+cents);for(var b=0;b<Math.floor((a.length-(1+b))/3);b++)a=a.substring(0,a.length-(4*
b+3))+","+a.substring(a.length-(4*b+3));return(sign?"":"-")+"$"+a+"."+cents}})();
