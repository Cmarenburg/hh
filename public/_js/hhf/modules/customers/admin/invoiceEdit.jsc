(function(){var b=hh.namespace("hhf.modules.customers.admin.invoiceEdit");b.config={};b.init=function(a){$.extend(b.config,a);$(document).ready(b.documentInit)};b.documentInit=function(){$(".quantity").spinner({max:99,min:1,change:b.updateTotals});$(".unit-price").spinner({max:1E4,min:0,change:b.updateTotals});$("#invoice").validate({errorContainer:$("#formError"),errorPlacement:function(a,b){a.insertAfter(b.closest("p").children().last())}})};b.updateTotals=function(){var a=$(this).data("id"),d=
$("#lines_"+a+"_unitPrice").val(),e=$("#lines_"+a+"_quantity").val(),c=0;$("#lines_"+a+" .item-total").text(b.formatCurrency(d*e));$("#lines_"+a+"_total").val(d*e);$(".item .line-total").each(function(){c+=parseFloat($(this).val())});$("#subTotal").val(c).siblings("span").text(b.formatCurrency(c));$("#total").val(c).siblings("span").text(b.formatCurrency(c))};b.formatCurrency=function(a){a=a.toString().replace(/\$|\,/g,"");isNaN(a)&&(a="0");sign=a==(a=Math.abs(a));a=Math.floor(100*a+0.50000000001);
cents=a%100;a=Math.floor(a/100).toString();10>cents&&(cents="0"+cents);for(var b=0;b<Math.floor((a.length-(1+b))/3);b++)a=a.substring(0,a.length-(4*b+3))+","+a.substring(a.length-(4*b+3));return(sign?"":"-")+"$"+a+"."+cents}})();